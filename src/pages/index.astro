---
import Layout from '~/layouts/PageLayout.astro';

const metadata = {
  title: 'Book of Chads'
};

const stories = [
  {
    id: 1,
    author: "DisperseControl",
    period: "2017-2024",
    title: "The -300K Bear Slayer",
    subtitle: "From Rekt to Revival",
    story: "When I first got started in 2017 I had a net worth of close to -$300K (negative) and could barely scrape together $200 to buy anything. Then in 2019/20 lost my job and house lol. Thanks to crypto I have pretty much flipped the entire situation in the other direction. I have a visceral hatred for bears",
    theme: "from-green-400 to-blue-500",
    emoji: "üó°Ô∏è"
  },
  {
    id: 2,
    author: "floatxbt",
    period: "2024",
    title: "Built Different",
    subtitle: "Never Stop The Grind",
    story: "Bro im built different, i lost every single satoshi u see here but got up everyday hungry and hunting with a positive attitude",
    theme: "from-yellow-400 to-red-500",
    emoji: "‚öîÔ∏è"
  },
  {
    id: 3,
    author: "c0gnate",
    period: "2015",
    title: "The Generous Tipper",
    subtitle: "When Bitcoin Was Young",
    story: "in 2015 one of my homies ordered me 1/2oz of weed on darkweb, i gave him like $220 to buy 1 BTC. the order came to like 0.8BTC and i just said keep the change cos i had no idea keke... the weed was chronic tho tbh",
    theme: "from-purple-400 to-pink-500",
    emoji: "üåø"
  }
];

const reversedStories = [...stories].reverse();
---

<Layout {metadata}>
  <div class="min-h-screen bg-black text-white overflow-hidden font-pixel">
    <!-- Cover Page -->
    <section class="min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">
      <!-- Animated Background -->
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-500/20 to-purple-600/20"></div>
        <div class="absolute inset-0 grid grid-cols-[repeat(20,1fr)] grid-rows-[repeat(20,1fr)] opacity-10">
          {Array.from({ length: 400 }).map((_, i) => (
            <div class="border-[0.5px] border-white/10 animate-pulse-grid"></div>
          ))}
        </div>
      </div>

      <!-- Floating Elements -->
      <div class="absolute inset-0 overflow-hidden">
        {Array.from({ length: 15 }).map((_, i) => (
          <div 
            class="absolute w-1 h-1 bg-yellow-400/30 rounded-full animate-float"
            style={`top: ${Math.random() * 100}%; left: ${Math.random() * 100}%; animation-delay: ${Math.random() * 5}s; animation-duration: ${5 + Math.random() * 5}s;`}
          >
          </div>
        ))}
      </div>

      <!-- Title -->
      <div class="relative group z-10">
        <div class="absolute inset-0 bg-gradient-to-r from-yellow-400 to-orange-500 blur-2xl opacity-30 group-hover:opacity-40 transition-opacity"></div>
        <h1 class="text-6xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 text-center pixel-edges relative">
          THE BOOK OF CHADS
        </h1>
      </div>

      <a 
        href="#story-3"
        class="mt-12 group relative inline-block"
      >
        <div class="absolute inset-0 bg-gradient-to-r from-yellow-400 to-orange-500 blur-lg opacity-50 group-hover:opacity-75 transition-all"></div>
        <span class="relative px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold block transform group-hover:scale-105 transition-all pixel-edges">
          START READING
        </span>
      </a>
    </section>

    <!-- Stories -->
    {reversedStories.map((story, index) => (
      <section
        class="min-h-screen flex items-center justify-center p-4 relative snap-start"
        id={`story-${story.id}`}
      >
        <!-- Dynamic Background -->
        <div class="absolute inset-0">
          <div class="absolute inset-0 grid grid-cols-[repeat(40,1fr)] grid-rows-[repeat(40,1fr)] opacity-5">
            {Array.from({ length: 1600 }).map(() => (
              <div class="border-[0.5px] border-white/5"></div>
            ))}
          </div>
        </div>

        <!-- Story Card -->
        <div class="max-w-3xl w-full perspective">
          <div class="relative backdrop-blur-lg bg-white/5 border-2 border-yellow-400/30 p-8 md:p-12 transform transition-all hover:scale-[1.02] group hover:-rotate-y-2">
            <!-- Progress line -->
            <div class="absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-yellow-400/50 to-transparent"></div>

            <!-- Story Header -->
            <div class="flex justify-between items-start mb-8">
              <div>
                <span class="text-5xl mb-4 pixel-edges animate-float">{story.emoji}</span>
                <h2 class="text-3xl md:text-4xl font-bold mt-4 text-yellow-400 pixel-edges uppercase">{story.title}</h2>
                <p class="text-xl text-yellow-400/70 mt-2 pixel-edges">{story.subtitle}</p>
                <p class="text-gray-400 mt-2 pixel-edges">{story.period}</p>
              </div>
              <div class="text-right">
                <a 
                  href={`https://twitter.com/${story.author}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-xl text-yellow-400 hover:text-yellow-300 transition-colors pixel-edges inline-flex items-center gap-1 group"
                >
                  <span class="text-yellow-400/70 group-hover:text-yellow-400 transition-colors">ùïè</span>
                  {story.author}
                </a>
              </div>
            </div>

            <!-- Story Content -->
            <div class="relative">
              <div class="absolute -left-4 top-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-yellow-400 to-transparent opacity-50"></div>
              <p class="text-xl md:text-2xl leading-relaxed pixel-edges">
                "{story.story}"
              </p>
            </div>

            <!-- Navigation -->
            <div class="mt-12 flex justify-between text-sm text-yellow-400/70 pixel-edges">
              {index > 0 && (
                <a 
                  href={`#story-${reversedStories[index - 1].id}`}
                  class="hover:text-yellow-400 transition-colors group flex items-center gap-2"
                >
                  <span class="transform group-hover:-translate-x-1 transition-transform">‚Üê</span>
                  PREVIOUS TALE
                </a>
              )}
              {index < reversedStories.length - 1 && (
                <a 
                  href={`#story-${reversedStories[index + 1].id}`}
                  class="hover:text-yellow-400 transition-colors ml-auto group flex items-center gap-2"
                >
                  NEXT TALE
                  <span class="transform group-hover:translate-x-1 transition-transform">‚Üí</span>
                </a>
              )}
            </div>
          </div>
        </div>
      </section>
    ))}

    <!-- Footer -->
    <div class="fixed bottom-4 right-4 z-50">
      <a
        href="https://www.tensor.trade/trade/chads"
        target="_blank"
        rel="noopener noreferrer"
        class="group relative inline-block"
      >
        <div class="absolute inset-0 bg-yellow-400 blur-lg opacity-50 group-hover:opacity-75 transition-all"></div>
        <span class="relative px-6 py-3 bg-yellow-400 text-black font-bold block border-2 border-black transform group-hover:translate-y-[-2px] group-hover:translate-x-[2px] transition-all pixel-edges">
          BECOME A CHAD
          <span class="inline-block transform group-hover:translate-x-1 transition-transform">‚Üó</span>
        </span>
      </a>
    </div>
  </div>
</Layout>

<style>
  @keyframes float {
    0%, 100% { 
      transform: translate(0, 0); 
      opacity: 0.3;
    }
    50% { 
      transform: translate(10px, -10px); 
      opacity: 0.6;
    }
  }

  @keyframes pulse-grid {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.3; }
  }

  .animate-float {
    animation: float 5s ease-in-out infinite;
  }

  .animate-pulse-grid {
    animation: pulse-grid 3s infinite;
    animation-delay: var(--delay, 0s);
  }

  .perspective {
    perspective: 2000px;
  }

  .pixel-edges {
    image-rendering: pixelated;
    -webkit-font-smoothing: none;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(250, 204, 21, 0.5);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(250, 204, 21, 0.8);
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
  }

  section {
    scroll-snap-align: start;
  }

  @media (max-width: 768px) {
    html {
      scroll-snap-type: y proximity;
    }
  }

  /* Text selection styling */
  ::selection {
    background: rgba(250, 204, 21, 0.3);
    color: #ffffff;
  }
</style>