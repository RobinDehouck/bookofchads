---
import Layout from '~/layouts/PageLayout.astro';

const metadata = {
  title: 'Book of CHADS'
};

const stories = [
  {
    id: 1,
    author: "DisperseControl",
    period: "2017-2024",
    title: "The -300K Bear Slayer",
    subtitle: "From Rekt to Revival",
    story: "When I first got started in 2017 I had a net worth of close to -$300K (negative) and could barely scrape together $200 to buy anything. Then in 2019/20 lost my job and house lol. Thanks to crypto I have pretty much flipped the entire situation in the other direction. I have a visceral hatred for bears",
    theme: "from-[#2A9D8F] to-[#264653]",
    emoji: "üó°Ô∏è"
  },
  {
    id: 2,
    author: "floatxbt",
    period: "2024",
    title: "Built Different",
    subtitle: "Never Stop The Grind",
    story: "Bro im built different, i lost every single satoshi u see here but got up everyday hungry and hunting with a positive attitude",
    theme: "from-[#E9C46A] to-[#F4A261]",
    emoji: "‚öîÔ∏è"
  },
  {
    id: 3,
    author: "c0gnate",
    period: "2015",
    title: "The Generous Tipper",
    subtitle: "When Bitcoin Was Young",
    story: "in 2015 one of my homies ordered me 1/2oz of weed on darkweb, i gave him like $220 to buy 1 BTC. the order came to like 0.8BTC and i just said keep the change cos i had no idea keke... the weed was chronic tho tbh",
    theme: "from-[#ffc131] to-[#E63946]",
    emoji: "üåø"
  }
];

const reversedStories = [...stories].reverse();
---

<Layout {metadata}>
  <div class="min-h-screen bg-[#F5F1E3] text-[#2C3639] font-pixel">
    <!-- Cover Page -->
    <section class="min-h-screen flex flex-col items-center justify-center p-4 relative">
      <!-- Background Pattern -->
      <div class="fixed inset-0 grid grid-cols-[repeat(32,1fr)] grid-rows-[repeat(32,1fr)] opacity-10 pointer-events-none">
        {Array.from({ length: 1024 }).map(() => (
          <div class="border-[0.5px] border-[#2C3639]/10"></div>
        ))}
      </div>

      <!-- Floating Emojis -->
      <div class="fixed inset-0 overflow-hidden pointer-events-none">
        {Array.from({ length: 8 }).map((_, i) => (
          <div 
            class="absolute w-12 h-12 pixel-float text-2xl"
            style={`
              top: ${Math.random() * 100}%;
              left: ${Math.random() * 100}%;
              animation-delay: ${Math.random() * 5}s;
            `}
          >
            {["üí™", "üëë", "‚öîÔ∏è", "üíé", "üöÄ", "üíØ"][Math.floor(Math.random() * 6)]}
          </div>
        ))}
      </div>

      <!-- Hero Content -->
      <div class="relative z-10 text-center max-w-4xl mx-auto px-4">
        <h1 class="text-6xl md:text-8xl font-black text-[#2C3639] pixel-edges mb-12 relative">
          <span class="absolute -inset-1 bg-[#ffc131]/10"></span>
          <span class="relative inline-block hero-text">BOOK OF CHADS</span>
        </h1>
        
        <div class="bg-white p-8 pixel-border mb-12 transform hover:translate-y-[-2px] transition-all duration-300">
          <p class="text-2xl md:text-3xl pixel-edges">
            Don't let your memes be dreams
          </p>
        </div>

        <a 
          href="#story-3"
          class="inline-block px-8 py-4 bg-[#ffc131] text-white font-bold text-xl pixel-border 
                 hover:translate-y-[-2px] hover:shadow-xl transition-all duration-300"
        >
          READ TALES
        </a>
      </div>

      <!-- Scroll Indicator -->
      <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
        <svg class="w-6 h-6 text-[#2C3639]/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
        </svg>
      </div>
    </section>

    <!-- Stories -->
    {reversedStories.map((story, index) => (
      <section
        class="min-h-screen flex items-center justify-center p-4 relative snap-start"
        id={`story-${story.id}`}
      >
        <div class="max-w-4xl w-full">
          <div class="bg-white pixel-border p-8 md:p-12 relative group hover:translate-y-[-4px] transition-all duration-300">
            <!-- Story Header -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
              <div>
                <div class="flex items-center gap-4 mb-4">
                  <span class="text-5xl pixel-edges animate-emojis">{story.emoji}</span>
                  <div class="h-8 w-[2px] bg-[#2C3639]/20"></div>
                  <p class="text-[#2C3639]/60 pixel-edges">{story.period}</p>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-[#2C3639] pixel-edges">
                  {story.title}
                </h2>
                <p class="text-xl text-[#2C3639]/70 mt-2 pixel-edges">{story.subtitle}</p>
              </div>
              
              <a 
                href={`https://twitter.com/${story.author}`}
                target="_blank"
                rel="noopener noreferrer"
                class="text-xl text-[#2C3639] hover:text-[#ffc131] transition-colors pixel-edges 
                       inline-flex items-center gap-2 px-4 py-2 hover:bg-[#ffc131]/10 rounded"
              >
                <span class="text-[#ffc131]">ùïè</span>
                {story.author}
              </a>
            </div>

            <!-- Story Content -->
            <div class="relative">
              <div class="absolute -left-4 top-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-[#ffc131] to-transparent opacity-50"></div>
              <p class="text-xl md:text-2xl leading-relaxed pixel-edges">
                "{story.story}"
              </p>
            </div>

            <!-- Navigation -->
            <div class="mt-12 flex flex-col md:flex-row justify-between gap-4">
              {index > 0 && (
                <button 
                  onclick={`document.getElementById('story-${reversedStories[index - 1].id}').scrollIntoView({behavior: 'smooth'})`}
                  class="nav-button group"
                >
                  <span class="transform group-hover:-translate-x-1 transition-transform">‚Üê</span>
                  PREVIOUS TALE
                </button>
              )}
              {index < reversedStories.length - 1 && (
                <button 
                  onclick={`document.getElementById('story-${reversedStories[index + 1].id}').scrollIntoView({behavior: 'smooth'})`}
                  class="nav-button group md:ml-auto"
                >
                  NEXT TALE
                  <span class="transform group-hover:translate-x-1 transition-transform">‚Üí</span>
                </button>
              )}
            </div>

            <!-- Story Progress -->
            <div class="absolute bottom-0 left-0 right-0 h-1 bg-[#2C3639]/10">
              <div 
                class="h-full bg-[#ffc131] transition-all duration-300"
                style={`width: ${((reversedStories.length - index) / reversedStories.length) * 100}%`}
              ></div>
            </div>
          </div>
        </div>
      </section>
    ))}

    <!-- Trade Button -->
    <a
      href="https://www.tensor.trade/trade/chads"
      target="_blank"
      rel="noopener noreferrer"
      class="fixed bottom-4 right-4 z-50 px-6 py-3 bg-[#ffc131] text-white font-bold pixel-border 
             hover:translate-y-[-2px] hover:shadow-xl transition-all duration-200 group"
    >
      BECOME A CHAD
      <span class="inline-block transform group-hover:translate-x-1 transition-transform">‚Üó</span>
    </a>
  </div>
</Layout>

<script>
  // Keyboard Navigation
  document.addEventListener('keydown', (e) => {
    const stories = {/* stories array */};
    const currentId = window.location.hash.slice(1);
    if (!currentId) return;

    const currentIndex = Array.from(document.querySelectorAll('section[id]'))
      .findIndex(section => section.id === currentId);

    if (currentIndex === -1) return;

    if (e.key === 'ArrowLeft' && currentIndex > 0) {
      const prevSection = document.querySelectorAll('section[id]')[currentIndex - 1];
      prevSection?.scrollIntoView({ behavior: 'smooth' });
    }
    
    if (e.key === 'ArrowRight' && currentIndex < document.querySelectorAll('section[id]').length - 1) {
      const nextSection = document.querySelectorAll('section[id]')[currentIndex + 1];
      nextSection?.scrollIntoView({ behavior: 'smooth' });
    }
  });
</script>

<style>
  /* Base Styles */
  .pixel-edges {
    image-rendering: pixelated;
    -webkit-font-smoothing: none;
  }

  .pixel-border {
    border: 4px solid #2C3639;
    box-shadow: 
      4px 4px 0 #2C3639,
      -4px -4px 0 rgba(44, 54, 57, 0.1);
  }

  /* Navigation Buttons */
  .nav-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: white;
    border: 2px solid #2C3639;
    padding: 0.75rem 1.5rem;
    color: #2C3639;
    font-weight: bold;
    transition: all 0.2s ease;
    box-shadow: 2px 2px 0 #2C3639;
  }

  .nav-button:hover {
    transform: translate(-2px, -2px);
    box-shadow: 4px 4px 0 #2C3639;
    color: #ffc131;
  }

  /* Animations */
  @keyframes float {
    0%, 100% { transform: translateY(0) rotate(0); }
    50% { transform: translateY(-20px) rotate(5deg); }
  }

  .pixel-float {
    animation: float 5s ease-in-out infinite;
  }

  @keyframes emojis {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  .animate-emojis {
    animation: emojis 2s ease-in-out infinite;
  }

  .hero-text {
    animation: hero 3s ease-in-out infinite;
  }

  @keyframes hero {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  /* Smooth Scrolling */
  html {
    scroll-behavior: smooth;
    scroll-snap-type: y proximity;
  }

  section {
    scroll-snap-align: start;
  }

  @media (max-width: 768px) {
    html {
      scroll-snap-type: y proximity;
    }
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    background: #F5F1E3;
    border-left: 2px solid #2C3639;
  }

  ::-webkit-scrollbar-thumb {
    background: #2C3639;
    border: 3px solid #F5F1E3;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #ffc131;
  }

  /* Responsive Adjustments */
  @media (max-width: 640px) {
    .pixel-border {
      border-width: 3px;
      box-shadow: 
        3px 3px 0 #2C3639,
        -3px -3px 0 rgba(44, 54, 57, 0.1);
    }
  }
</style>