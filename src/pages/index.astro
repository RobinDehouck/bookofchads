---
import Layout from '~/layouts/PageLayout.astro';

const metadata = {
  title: 'Book of CHADS'
};

// Stories array remains the same
const reversedStories = [...stories].reverse();

// Retro color palette
const retroColors = {
  neonPink: '#ff2a6d',
  neonBlue: '#05d9e8',
  neonPurple: '#7700ff',
  retroYellow: '#ffd319',
  matrix: '#00ff00'
};
---

<Layout {metadata}>
  <div class="min-h-screen bg-black text-white overflow-hidden font-pixel">
    <!-- CRT Effect Overlay -->
    <div class="pointer-events-none fixed inset-0 z-[60]">
      <div class="absolute inset-0 bg-scanline"></div>
      <div class="absolute inset-0 animate-flicker opacity-[0.02]"></div>
    </div>

    <!-- Cover Page -->
    <section class="min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">
      <!-- Retro Grid Background -->
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-[linear-gradient(transparent_0%,rgba(255,255,255,0.05)_50%,transparent_100%)]"></div>
        <div class="absolute inset-0 cyber-grid"></div>
      </div>

      <!-- Animated Glowing Border -->
      <div class="absolute inset-0 glowing-borders"></div>

      <!-- Title Section with Glitch Effect -->
      <div class="relative z-10 glitch-container">
        <div class="retro-box p-12 border-neon text-center transform hover:scale-105 transition-all duration-300">
          <h1 
            class="text-6xl md:text-8xl font-black text-white text-center pixel-edges glitch-text"
            data-text="BOOK OF CHADS"
          >
            BOOK OF CHADS
          </h1>
          <div class="mt-4 glitch-subtitle" data-text="SIGMA TALES OF GLORY">
            SIGMA TALES OF GLORY
          </div>
        </div>
      </div>

      <!-- Start Button with Retro Effects -->
      <a 
        href="#story-3"
        class="mt-12 relative group neon-button"
      >
        <span class="neon-button-border"></span>
        <span class="relative px-8 py-4 bg-black text-neon-blue font-bold block text-2xl">
          PRESS START
          <span class="blink-cursor">_</span>
        </span>
      </a>

      <!-- Floating Retro Icons -->
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        {Array.from({ length: 12 }).map((_, i) => (
          <div 
            class="absolute retro-float"
            style={`top: ${Math.random() * 100}%; left: ${Math.random() * 100}%; animation-delay: ${Math.random() * 5}s;`}
          >
            <div class="text-3xl pixel-art">
              {["üí™", "üëë", "‚öîÔ∏è", "üíé", "üöÄ", "üíØ"][Math.floor(Math.random() * 6)]}
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- Stories -->
    {reversedStories.map((story, index) => (
      <section
        class="min-h-screen flex items-center justify-center p-4 relative snap-start"
        id={`story-${story.id}`}
      >
        <!-- Retro Background -->
        <div class="absolute inset-0">
          <div class="absolute inset-0 cyber-grid"></div>
          <div class="absolute inset-0 bg-gradient-radial from-transparent to-black/90"></div>
        </div>

        <!-- Story Card -->
        <div class="max-w-4xl w-full perspective">
          <div class="retro-card group">
            <!-- Card Header with Neon Effect -->
            <div class="flex justify-between items-start mb-8">
              <div>
                <span class="text-6xl mb-4 pixel-art retro-float">{story.emoji}</span>
                <h2 class="text-4xl md:text-5xl font-bold mt-4 neon-text uppercase retro-shadow">
                  {story.title}
                </h2>
                <p class="text-xl neon-text-alt mt-2 pixel-edges">{story.subtitle}</p>
                <div class="flex items-center gap-4 mt-2">
                  <p class="text-neon-blue">{story.period}</p>
                  <div class="h-4 w-4 animate-pulse bg-neon-blue"></div>
                </div>
              </div>
              
              <!-- Twitter Handle with Retro Style -->
              <a 
                href={`https://twitter.com/${story.author}`}
                target="_blank"
                rel="noopener noreferrer"
                class="retro-button group"
              >
                <span class="text-xl neon-text">
                  <span class="text-neon-pink">ùïè</span>
                  {story.author}
                </span>
              </a>
            </div>

            <!-- Story Content with Terminal Effect -->
            <div class="relative terminal-text">
              <div class="absolute -left-4 top-0 bottom-0 w-1 neon-line"></div>
              <p class="text-xl md:text-2xl leading-relaxed typing-effect">
                "{story.story}"
              </p>
            </div>

            <!-- Navigation with Retro Buttons -->
            <div class="mt-12 flex justify-between">
              {index > 0 && (
                <a 
                  href={`#story-${reversedStories[index - 1].id}`}
                  class="retro-nav-button"
                >
                  ‚Üê PREVIOUS TALE
                </a>
              )}
              {index < reversedStories.length - 1 && (
                <a 
                  href={`#story-${reversedStories[index + 1].id}`}
                  class="retro-nav-button ml-auto"
                >
                  NEXT TALE ‚Üí
                </a>
              )}
            </div>
          </div>
        </div>
      </section>
    ))}

    <!-- Enhanced Footer -->
    <div class="fixed bottom-4 right-4 z-50">
      <a
        href="https://www.tensor.trade/trade/chads"
        target="_blank"
        rel="noopener noreferrer"
        class="retro-button-large group"
      >
        <span class="neon-text text-xl">
          BECOME GIGACHAD
          <span class="inline-block transform group-hover:translate-x-1 transition-transform">‚Üó</span>
        </span>
      </a>
    </div>
  </div>
</Layout>

<style>
  /* Base Retro Styles */
  @keyframes scanline {
    0% { transform: translateY(-100%); }
    100% { transform: translateY(100%); }
  }

  @keyframes flicker {
    0% { opacity: 0.27861; }
    5% { opacity: 0.34769; }
    10% { opacity: 0.23604; }
    15% { opacity: 0.90626; }
    20% { opacity: 0.18128; }
    25% { opacity: 0.83891; }
    30% { opacity: 0.65583; }
    35% { opacity: 0.67807; }
    40% { opacity: 0.26559; }
    45% { opacity: 0.84693; }
    50% { opacity: 0.96019; }
    55% { opacity: 0.08594; }
    60% { opacity: 0.20313; }
    65% { opacity: 0.71988; }
    70% { opacity: 0.53455; }
    75% { opacity: 0.37288; }
    80% { opacity: 0.71428; }
    85% { opacity: 0.70419; }
    90% { opacity: 0.7003; }
    95% { opacity: 0.36108; }
    100% { opacity: 0.24387; }
  }

  .bg-scanline {
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.2) 0px,
      rgba(0, 0, 0, 0.2) 1px,
      transparent 1px,
      transparent 2px
    );
    animation: scanline 10s linear infinite;
  }

  /* Neon Effects */
  .neon-text {
    color: #fff;
    text-shadow:
      0 0 5px #fff,
      0 0 10px #fff,
      0 0 20px #ff2a6d,
      0 0 30px #ff2a6d,
      0 0 40px #ff2a6d;
  }

  .neon-text-alt {
    color: #fff;
    text-shadow:
      0 0 5px #fff,
      0 0 10px #fff,
      0 0 20px #05d9e8,
      0 0 30px #05d9e8,
      0 0 40px #05d9e8;
  }

  /* Retro Card Styles */
  .retro-card {
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid #ff2a6d;
    box-shadow:
      0 0 5px #ff2a6d,
      inset 0 0 5px #ff2a6d;
    padding: 2rem;
    transition: all 0.3s ease;
  }

  .retro-card:hover {
    transform: scale(1.02) translateZ(0);
    box-shadow:
      0 0 10px #ff2a6d,
      0 0 20px #ff2a6d,
      inset 0 0 10px #ff2a6d;
  }

  /* Cyber Grid */
  .cyber-grid {
    background-image: 
      linear-gradient(rgba(255, 42, 109, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 42, 109, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Terminal Effect */
  .terminal-text {
    font-family: 'VT323', monospace;
    color: #05d9e8;
  }

  .typing-effect {
    overflow: hidden;
    border-right: 2px solid #05d9e8;
    animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
  }

  /* Retro Buttons */
  .retro-button {
    background: transparent;
    border: 2px solid #ff2a6d;
    padding: 0.5rem 1rem;
    color: #fff;
    text-shadow: 0 0 5px #ff2a6d;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .retro-button:hover {
    background: rgba(255, 42, 109, 0.1);
    transform: translateY(-2px);
    box-shadow: 0 0 10px #ff2a6d;
  }

  /* Additional Animations */
  @keyframes retro-float {
    0%, 100% { transform: translateY(0) rotate(0); }
    50% { transform: translateY(-20px) rotate(5deg); }
  }

  .retro-float {
    animation: retro-float 5s ease-in-out infinite;
  }

  /* Glitch Effect */
  .glitch-text {
    position: relative;
    animation: glitch 1s linear infinite;
  }

  @keyframes glitch {
    2%, 64% { transform: translate(2px, 0) skew(0deg); }
    4%, 60% { transform: translate(-2px, 0) skew(0deg); }
    62% { transform: translate(0, 0) skew(5deg); }
  }

  /* Additional styles omitted for brevity - let me know if you want to see more! */
</style>